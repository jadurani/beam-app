<ion-header>

  <ion-navbar>
    <ion-title>{{ user.fullName }}</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <ng-container *ngIf="user && !loading">
    <ion-row>
      <!--
        Left Column containing Basic Profile Info and ICE Info
      -->
      <ion-col col-12 col-md-5>
        <personal-info [user]="user"></personal-info>

        <!-- ICE section -->
        <ion-card>
          <ion-row>
            <ion-col col-9>
              <ion-card-title padding-left padding-top>
                In Case of Emergency
              </ion-card-title>
            </ion-col>
            <ion-col col-3>
              <ion-item text-right>
                <button ion-button clear
                  color="dark"
                  [navPush]="addEditMemberPage"
                  [navParams]="{'isEdit': true, 'partToEdit': 'iceContact', 'user': user}">
                    <ion-icon name="create"></ion-icon>
                  </button>
              </ion-item>
            </ion-col>

          </ion-row>
          <div class="horizontal-rule"></div>

          <ion-row>
            <ion-col col-3>
              <ion-item text-right>
                <ion-icon name="person"></ion-icon>
              </ion-item>
            </ion-col>
            <ion-col col-9>
              <ion-item text-left>
                {{ user.iceContact.name }}
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col col-3>
              <ion-item text-right>
                <ion-icon name="heart"></ion-icon>
              </ion-item>
            </ion-col>
            <ion-col col-9>
              <ion-item text-left text-capitalize>
                {{ user.iceContact.relationship }}
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col col-3>
              <ion-item text-right>
                <ion-icon name="call"></ion-icon>
              </ion-item>
            </ion-col>
            <ion-col col-9>
              <ion-item text-left>
                {{ user.iceContact.contactNumber }}
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col col-3>
              <ion-item text-right>
                <ion-icon name="mail"></ion-icon>
              </ion-item>
            </ion-col>
            <ion-col col-9>
              <ion-item text-left>
                {{ user.iceContact.email }}
              </ion-item>
            </ion-col>
          </ion-row>
        </ion-card>
      </ion-col>

      <!--
        Right Column Containing
        Fitness Parameters
        TO DO: Activity Timeline
      -->
      <ion-col col-12 col-md-7>
        <ion-card>
          <ion-row>
            <ion-col col-9>
              <ion-card-title padding-left padding-top>
                Fitness Parameters
              </ion-card-title>
            </ion-col>
            <ion-col col-3>
              <ion-item text-right>
                <button ion-button
                  clear
                  round
                  color="dark"
                  (click)="addFitnessParams(user)">
                    <ion-icon name="add"></ion-icon>
                  </button>
              </ion-item>
            </ion-col>
          </ion-row>

          <div class="horizontal-rule"></div>

          <!-- Fitness Parameters -->
          <ion-row padding *ngIf="user.bodyInfo">
            <ion-item-group ion-col col-lg-6>
              <ion-item>
                <ion-label>Date Taken</ion-label>
                <ion-label text-center>{{ user.bodyInfo.dateTaken | date: 'd MMM yyyy' }}</ion-label>
              </ion-item>

              <ion-item>
                <ion-label>Age</ion-label>
                <ion-label text-center>{{ user.bodyInfo.trueAge }}</ion-label>
              </ion-item>
              <ion-item>
                <ion-label>Body Age</ion-label>
                <ion-label text-center>{{ user.bodyInfo.bodyAge }}</ion-label>
              </ion-item>

              <ion-item>
                <ion-label>Height</ion-label>
                <ion-label text-center>{{ user.bodyInfo.height }}</ion-label>
              </ion-item>
              <ion-item>
                <ion-label>Weight</ion-label>
                <ion-label text-center>{{ user.bodyInfo.weight }}</ion-label>
              </ion-item>

              <ion-item>
                <ion-label>Visceral Fat Rating</ion-label>
                <ion-label text-center>{{ user.bodyInfo.visceralFatRating }}</ion-label>
              </ion-item>
              <ion-item>
                <ion-label>Resting Metabolism</ion-label>
                <ion-label text-center>{{ user.bodyInfo.restingMetabolism }}</ion-label>
              </ion-item>
              <ion-item>
                <ion-label>Body Mass Index</ion-label>
                <ion-label text-center>{{ user.bodyInfo.bmi }}</ion-label>
              </ion-item>
            </ion-item-group>
            <ion-item-group ion-col col-lg-6>
              <ion-item>
                <ion-label>% Body Fat</ion-label>
                <ion-label text-center>{{ user.bodyInfo.percBodyFat }}</ion-label>
              </ion-item>

              <ion-item-group>
                <ion-item>
                  <ion-label>% Subcutaneous Fat</ion-label>
                </ion-item>
                <ion-item>
                  <ion-label text-center>Total</ion-label>
                  <ion-label text-center>{{ user.bodyInfo.subcutaneousMeasurements.total }}</ion-label>
                </ion-item>
                <ion-item>
                  <ion-label text-center>Trunk</ion-label>
                  <ion-label text-center>{{ user.bodyInfo.subcutaneousMeasurements.trunk }}</ion-label>
                </ion-item>
                <ion-item>
                  <ion-label text-center>Arms</ion-label>
                  <ion-label text-center>{{ user.bodyInfo.subcutaneousMeasurements.arms }}</ion-label>
                </ion-item>
                <ion-item>
                  <ion-label text-center>Legs</ion-label>
                  <ion-label text-center>{{ user.bodyInfo.subcutaneousMeasurements.legs }}</ion-label>
                </ion-item>
              </ion-item-group>

              <ion-item-group>
                <ion-item>
                  <ion-label>% Skeletal Fat</ion-label>
                </ion-item>
                <ion-item>
                  <ion-label text-center>Total</ion-label>
                  <ion-label text-center>{{ user.bodyInfo.skeletalMeasurements.total }}</ion-label>
                </ion-item>
                <ion-item>
                  <ion-label text-center>Trunk</ion-label>
                  <ion-label text-center>{{ user.bodyInfo.skeletalMeasurements.trunk }}</ion-label>
                </ion-item>
                <ion-item>
                  <ion-label text-center>Arms</ion-label>
                  <ion-label text-center>{{ user.bodyInfo.skeletalMeasurements.arms }}</ion-label>
                </ion-item>
                <ion-item>
                  <ion-label text-center>Legs</ion-label>
                  <ion-label text-center>{{ user.bodyInfo.skeletalMeasurements.legs }}</ion-label>
                </ion-item>
              </ion-item-group>

            </ion-item-group>
          </ion-row>

          <ion-row *ngIf="!user.bodyInfo">
            <ion-label text-wrap text-center>
              Fitness Parameters tell you how fit you are. Record your fitness parameters now!
            </ion-label>
          </ion-row>

        </ion-card>
      </ion-col>
    </ion-row>
  </ng-container>

  <ng-container *ngIf="!user || loading">
    <div class="spinner">
      <ion-spinner></ion-spinner>
    </div>
  </ng-container>
</ion-content>
