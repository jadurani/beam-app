<ion-header>

  <ion-navbar>
    <ion-title>{{ user.fullName }}</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <ng-container *ngIf="user && !loading">
    <ion-row>
      <!-- profile part -->
      <ion-col col-12 col-md-5>

        <!-- profile -->
        <ion-card>
          <ion-item text-right>
            <button ion-button clear
              color="dark"
              [navPush]="addEditMemberPage"
              [navParams]="{'isEdit':true, 'partToEdit': 'basicInfo', 'user': user}">
              <ion-icon name="create"></ion-icon>
            </button>
          </ion-item>

          <ion-avatar>
            <img src="assets/imgs/unknown_person.png">
          </ion-avatar>
          <ion-item text-center padding-top>
            <ion-card-title>
              {{ user.fullName }}
            </ion-card-title>
            <p>
              Member since: {{ user.dateJoined | date:'d MMM yyyy' }}
            </p>
          </ion-item>

          <ion-list class="profile-details">
            <ion-row>
              <ion-col col-3>
                <ion-item text-right>
                  <ion-icon name="call"></ion-icon>
                </ion-item>
              </ion-col>
              <ion-col col-9>
                <ion-item text-left>
                  {{ user.phoneNumbers[0].number }}
                </ion-item>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col col-3>
                <ion-item text-right>
                  <ion-icon name="mail"></ion-icon>
                </ion-item>
              </ion-col>
              <ion-col col-9>
                <ion-item text-left>
                  {{ user.email }}
                </ion-item>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col col-3>
                <ion-item text-right>
                  <ion-icon name="pin"></ion-icon>
                </ion-item>
              </ion-col>
              <ion-col col-9>
                <ion-item text-left text-wrap>
                  <span *ngIf="profileExpanded">
                    {{ user.address.street }} {{ user.address.barangay }}
                  </span>
                  <span>
                    {{ user.address.city }}
                  </span>
                </ion-item>
              </ion-col>
            </ion-row>

            <ion-item-group class="collapsible-details"
              [ngClass]="{'expanded': profileExpanded}">
              <ion-row *ngIf="user.workDetails">
                <ion-col col-3>
                  <ion-item text-right>
                    <ion-icon name="alert"></ion-icon>
                  </ion-item>
                </ion-col>
                <ion-col col-9>
                  <ion-item text-left>
                    {{ user.workDetails.title }} at {{ user.workDetails.company }}
                  </ion-item>
                </ion-col>
              </ion-row>

              <ion-row>
                <ion-col col-3>
                  <ion-item text-right>
                    <ion-icon name="calendar"></ion-icon>
                  </ion-item>
                </ion-col>
                <ion-col col-9>
                  <ion-item text-left>
                    {{ user.dateOfBirth | date:'d MMMM yyyy' }}
                  </ion-item>
                </ion-col>
              </ion-row>

              <ion-row *ngIf="user.otherRemarks">
                <ion-col col-3>
                  <ion-item text-right>
                    <ion-icon name="list-box"></ion-icon>
                  </ion-item>
                </ion-col>
                <ion-col col-9>
                  <ion-item text-left text-wrap>
                    {{ user.otherRemarks }}
                  </ion-item>
                </ion-col>
              </ion-row>
            </ion-item-group>
          </ion-list>

          <div class="horizontal-rule"></div>
          <p text-right>
            <button ion-button clear (click)="profileToggle()">
              <ion-note *ngIf="!profileExpanded" text-uppercase>
                See more
                <ion-icon margin-left name="ios-arrow-down"></ion-icon>
              </ion-note>
              <ion-note *ngIf="profileExpanded" text-uppercase>
                See less
                <ion-icon margin-left name="ios-arrow-up"></ion-icon>
              </ion-note>
            </button>
          </p>
        </ion-card>

        <!-- ICE -->
        <ion-card>
          <ion-row>
            <ion-col col-9>
              <ion-card-title padding-left padding-top>
                In Case of Emergency
              </ion-card-title>
            </ion-col>
            <ion-col col-3>
              <ion-item text-right>
                <button ion-button clear
                  color="dark"
                  [navPush]="addEditMemberPage"
                  [navParams]="{'isEdit': true, 'partToEdit': 'iceContact', 'user': user}">
                    <ion-icon name="create"></ion-icon>
                  </button>
              </ion-item>
            </ion-col>

          </ion-row>
          <div class="horizontal-rule"></div>

          <ion-row>
            <ion-col col-3>
              <ion-item text-right>
                <ion-icon name="person"></ion-icon>
              </ion-item>
            </ion-col>
            <ion-col col-9>
              <ion-item text-left>
                {{ user.iceContact.name }}
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col col-3>
              <ion-item text-right>
                <ion-icon name="heart"></ion-icon>
              </ion-item>
            </ion-col>
            <ion-col col-9>
              <ion-item text-left text-capitalize>
                {{ user.iceContact.relationship }}
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col col-3>
              <ion-item text-right>
                <ion-icon name="call"></ion-icon>
              </ion-item>
            </ion-col>
            <ion-col col-9>
              <ion-item text-left>
                {{ user.iceContact.contactNumber }}
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col col-3>
              <ion-item text-right>
                <ion-icon name="mail"></ion-icon>
              </ion-item>
            </ion-col>
            <ion-col col-9>
              <ion-item text-left>
                {{ user.iceContact.email }}
              </ion-item>
            </ion-col>
          </ion-row>
        </ion-card>
      </ion-col>

      <!-- other parts -->
      <ion-col col-12 col-md-7>
      </ion-col>
    </ion-row>
  </ng-container>

  <ng-container *ngIf="!user || loading">
    <div class="spinner">
      <ion-spinner></ion-spinner>
    </div>
  </ng-container>
</ion-content>
